spring:
  profiles:
    active: local # 기본 모드 설정

  # [공통] DB 드라이버 & JPA 설정
  datasource:
    driver-class-name: org.postgresql.Driver

  jpa:
    hibernate:
      ddl-auto: validate
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true

  # [공통] Kafka Consumer 설정 (주소 제외)
  kafka:
    consumer:
#      group-id: only4-consumer-group
      # earliest: 큐에 쌓인 옛날 메시지부터 읽기 / latest: 지금부터 온 것만 읽기
      auto-offset-reset: earliest
      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer
      value-deserializer: org.apache.kafka.common.serialization.StringDeserializer

app: # 커스텀 설정 루트(prefix)
  kafka: # kafka 관련 설정을 묶는 네임스페이스
    topics: # 토픽 이름들을 모아두는 구역
      group-id: only4-consumer-group # Kafka Consumer Group ID / 같은 group.id를 가진 컨슈머 인스턴스들은 하나의 그룹으로 동작하고, 파티션을 분담함
      email-request: email.send.request
      sms-request: sms.send.request
      dlt: notification.dlt

    retry: # 재시도 관련 설정을 묶는 구역
      email-max-attempts: 3
      sms-max-attempts: 3
      initial-interval-ms: 1000 # 백오프(재시도 간격)의 시작값 / 1초 후 첫 재시도
      multiplier: 2.0 # 지수 백오프 배율
      max-interval-ms: 30000 # 재시도 간격 상한 / 아무리 커져도 30초를 넘지 않음
